---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import { formatDate } from '../../lib/date';

const collection = (await getCollection('blog')).sort((a, b) => {
	const d1 = a.data.date;
	const d2 = b.data.date;
	if (d1 < d2) return 1;
	else if (d1 > d2) return -1;
	else return 0;
});
---

<BaseLayout title="Blog">
	<div class="w-full md:min-w-[36rem]">
		<h1 class="mb-[0.8rem]">Blog</h1>
		<ol class="grid gap-1">
			{
				collection.map((e) => (
					<li class="card p-4">
						<article>
							<a href={`/blog/${e.slug}`} class="flex flex-col text-inherit hover:no-underline">
								<h2 class="mb-1 text-h4">{e.data.title}</h2>
								{e.data.description}
								<time
									datetime={e.data.date.toISOString()}
									class="text-neutral-500 dark:text-neutral-400"
								>
									{`${formatDate(e.data.date)}`}
								</time>
							</a>
						</article>
					</li>
				))
			}
		</ol>
	</div>
</BaseLayout>
